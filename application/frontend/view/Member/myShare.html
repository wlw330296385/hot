<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>训练营</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!--标准mui.css-->
    <link rel="stylesheet" href="/static/frontend/css/mui.min.css">
    <style type="text/css">
        html,body { margin:0px 0px 40px; padding:0px; width:1000px; background:#CCC; }
        #popupShare { width:1000px; position:absolute; left:0; top:0;  z-index:999; }
        #pageShare { width:1000px; font-family: "Microsoft Yahei", Arial, sans-serif; position:relative; background:#000; }
        #picBg { width:1000px; }
        #qrcode { position:absolute; left:110px; top:1230px; z-index:888; color:#CCC;  }
        #qrcode span { display:block; width:244px; height:40px; font-size:18px; text-align:center; }
        #qrcode img { width:244px; }
        #qrcode p {font-size:24px; line-height:36px; }
        #userInfo {  color:#999; text-align:left !important; }
        #canvasPic { display:none; }
        #fixTop{ width:1000px; height:90px; text-align:center; line-height:85px; position:fixed; left:0; bottom:0; z-index:9999; font-size:42px; }
        #fixTop a { background-color:#F60; display:block; width:100%; height:90px; color:#fff; text-decoration:none; }
        #fixTop span { background-color:#690; display:none; display:block; width:100%; height:90px; color:#fff; text-decoration:none; }
        #popupShare { display:none; }
    </style>
</head>

<body>
<div id="fixTop">
    <a href="#" id="btnSave">[ 点击生成图片并分享 ]</a>
    <span>请长按图片保存或转发朋友</span>
</div>
<div id="pageShare">
    <img src="/static/frontend/images/share.jpg" id="picBg" />
    <div id="qrcode">
        <span>欢迎识别二维码加入我们</span>
        <img src="{$qrcodeimg}" />
        <p>我是大热的会员了，现在推荐给同样喜欢篮球的你，<br />一起来分享大热篮球带给我们的激情、欢乐和友谊！<br /><span id="userInfo">[ 好友推荐 {$membername} ]</span></p>
    </div>
</div>


<!--canvasPic:页面转画布-->
<div id="canvasPic"></div>
<!--pageShare:画布转图片-->
<div id="popupShare">
    <img src="/static/frontend/images/images/blank.png" id="sharePic" width="100%" />
</div>

<script src="/static/frontend/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript">


    /*生成canvas图形*/

    // 获取按钮id
    var btnSave = document.getElementById("btnSave");
    // 获取内容id
    var content = $("#pageShare");
    // 进行canvas生成
    btnSave.onclick = function(){
        var h = content.clientHeight;
        var w = content.clientWidth;
        html2canvas(content, {
            scale: 2,
            onrendered: function(canvas) {
                //添加属性
                canvas.setAttribute('id','thecanvas');
                //读取属性值
                // var value= canvas.getAttribute('id');
                document.getElementById('canvasPic').appendChild(canvas);
                var oCanvas = document.getElementById("thecanvas");
                var img_data2 = Canvas2Image.saveAsJPEG(oCanvas, true, w, h).getAttribute('src');
                var element = document.getElementById('sharePic');
                element.src = img_data2;
                $("#pageShare").hide();
                $("#fixTop a").hide();
                $("#popupShare").show();
                $("#fixTop span").show();
            }
        });
    }



</script>
</body>
<script src="/static/frontend/js/jquery-3.2.1.min.js"></script>
<!-- 将canvas图片保存成图片 -->
<script src="/static/frontend/js/html2canvas/html2canvas.min.js"></script>
<script src="/static/frontend/js/html2canvas/canvas2image.js"></script>
<script src="/static/frontend/js/html2canvas/base64.js"></script>
</html>