{extend name="layout/common"/}

{block name="page-content"}
<div class="panel panel-default panel-intro">
    <div class="panel-heading">
        <div class="panel-lead">
            <em>训练营管理</em>
        </div>
    </div>
    <div class="panel-body">
        <div class="box no-border">
            <div class="box-body">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>训练营名称</th>
                        <th>负责人</th>
                        <th>类型</th>
                        <th>所在地区</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    {volist name="list" id="vo"}
                    <tr>
                        <td>{$vo.id}</td>
                        <td>{$vo.camp}</td>
                        <td>{$vo.realname}</td>
                        <td>
                            {switch name="vo.type"}
                            {case value="1"}机构{/case}
                            {case value="2"}其他{/case}
                            {default/}独立用户
                            {/switch}
                        </td>
                        <td>{$vo.province}-{$vo.city}-{$vo.area}</td>
                        <td>
                            {$vo.status}
                        </td>
                        <td>
                            <a href="{:url('camp/show', ['id' => $vo['id']])}" class="btn btn-xs btn-info"><i class="fa fa-inbox"></i> 查看详细</a>
                            <a href="{:url('camp/editstatus', ['id' => $vo['id']])}" class="btn btn-xs bg-purple change-btn">
                                <i class="fa fa-inbox"></i>
                                {switch name="vo.status_num"}
                                {case value="1"}下架训练营{/case}
                                {case value="2"}上架训练营{/case}
                                {default /}审核训练营
                                {/switch}
                            </a>
                            {neq name="vo.status_num" value="0"}
                            <a href="{:url('camp/setcur', ['id' => $vo['id']])}" class="btn btn-xs btn-primary"><i class="fa  fa-exchange"></i> 设为当前查看</a>
                            <a href="{:url('camp/wxindex', ['id' => $vo['id']])}" class="btn btn-xs btn-primary wxindex"><i class="fa fa-inbox"></i> 机构首页链接</a>
                            {/neq}
                            <!--<a href="{:url('camp/sdel', ['id' => $vo['id']])}" class="btn btn-xs btn-danger del-btn"><i class="fa fa-trash"></i> 删除</a>-->
                        </td>
                    </tr>
                    {/volist}
                    </tbody>
                </table>
            </div>
            <div class="box-footer clearfix">
                {$list->render()}
            </div>
        </div>
    </div>
</div>
{/block}

{block name="js"}
<script>
"use strict";
$(function(){
    $('.change-btn').click(function() {
        if ( confirm('确定要'+$.trim($(this).text())+'吗?') ) {
            return true;
        }  else {
            return false;
        }
    });

    $('.wxindex').click(function(e) {
        e.preventDefault();
        var layerFrameUrl = $(this).attr('href');
        var layerFrameTitle = $(this).text();
        layui.use('layer', function() {
            var layer = layui.layer;
            layer.open({
                type: 2,
                title: layerFrameTitle,
                shadeClose: true,
                shade: 0.8,
                area: ['650px', '600px'],
                content: layerFrameUrl
            });
        });
    });
});
</script>
{/block}