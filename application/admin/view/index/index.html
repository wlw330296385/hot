{extend name="layout/common"/}

{block name="page-content"}


<div class="col-md-12 col-sm-12">
    <!-- Info boxes -->
    <div class="row">

        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">平台注册量</span>
                    <span class="info-box-number">{$memberCount}<small></small></span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>


        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">平台订单支付总额</span>
                    <span class="info-box-number">{$totalBill} 元<small></small></span>
                </div>
            </div>
        </div>

<!-- 
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">平台总收入(不包括营业额版订单)</span>
                    <span class="info-box-number">{$totalIncome} 元<small></small></span>
                </div>
            </div>
        </div>

 -->
        <!-- <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">平台总支出(不包括营业额版提现)</span>
                    <span class="info-box-number">{$totalOutput} 元<small></small></span>
                </div>
            </div>
        </div> -->

        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">平台总提现(包括营业额版\课时版\个人)</span>
                    <span class="info-box-number">{$totalWithdraw} 元<small></small></span>
                </div>
            </div>
        </div>

        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">平台总课时</span>
                    <span class="info-box-number">{$totalSchedule} 节<small></small></span>
                </div>
            </div>
        </div>

        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="fa fa-sign-in"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">上课总人次</span>
                    <span class="info-box-number">{$totalScheduleStudent} 人<small></small></span>
                </div>
            </div>
        </div>

        <!-- /.col -->
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-red"><i class="fa fa-pie-chart"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">训练营数量</span>
                    <span class="info-box-number">{$campCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-green"><i class="fa fa-odnoklassniki"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">教练数量(正常)</span>
                    <span class="info-box-number">{$coachCount1}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-green"><i class="fa fa-odnoklassniki"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">教练数量(其他情况)</span>
                    <span class="info-box-number">{$coachCount2}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="fa fa-object-group"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">球场数量</span>
                    <span class="info-box-number">{$courtCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>





        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="fa fa-object-group"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">在线课程</span>
                    <span class="info-box-number">{$lessonCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>



        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="fa fa-object-group"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">在线课时</span>
                    <span class="info-box-number">{$scheduleCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>





        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="fa fa-object-group"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">在线活动</span>
                    <span class="info-box-number">{$eventCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>






        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="fa fa-object-group"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">在线班级</span>
                    <span class="info-box-number">{$gradeCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>





        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="fa fa-object-group"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">在线裁判</span>
                    <span class="info-box-number">{$refereeCount}</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>







        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="ion ion-ios-people-outline"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">公众号关注数量</span>
                    <span class="info-box-number" id="wxGroups"></span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>
        <!-- /.col -->


    </div>
    <!-- /.row -->
</div>


    <section class="content">

        <div class="row">
            <div class="col-md-12">
                <!-- AREA CHART -->
                <div class="box box-danger">
                    <div class="box-header with-border">
                        <h3 class="box-title">学员分布（训练点） </h3>
                    </div>
                    <div class="box-body">
                        <div id="canvasLocation" style="height: 400px"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <!-- AREA CHART -->
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">课程购买（占比） </h3>
                    </div>
                    <div class="box-body">
                        <div id="canvasLesson" style="height: 400px"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <!-- AREA CHART -->
                <div class="box box-danger">
                    
                    <div class="box-body">
                        <div id="income" style="height: 400px"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
            
        </div>
        <div class="row">
            <div class="col-md-12">
                <!-- AREA CHART -->
                <div class="box box-danger">
                    
                    <div class="box-body">
                        <div id="output" style="height: 400px"></div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
            
        </div>
    </section>





{/block}

{block name='js'}
<script type="text/javascript" src="/static/frontend/js/wooApi.js" ></script>
<script src="/static/plugins/echart/echarts.min.js"></script>
<script src="/static/plugins/echart/hot.js"></script>

<script type="text/javascript">
    var date=new Date;
    var currYear=date.getFullYear();
    var currMonth=date.getMonth()+1;
    var currDate=date.getDate();
    var arrDate = new Array();
    for(var i=1;i<=currDate;i++){
        arrDate.push(i)
    }

    /////////////////////////////////////////////////////////////////////////////////////// 营业额折线图（本月）


    
    var gradeCourtData = JSON.parse('{$gradeCourtData}');
    var lessonBuyData = JSON.parse('{$lessonBuyData}');
    var monthI = JSON.parse('{$monthI}');
    var monthO = JSON.parse('{$monthO}');
    var dataI = JSON.parse('{$dataI}');
    var dataO = JSON.parse('{$dataO}');

    $(function(){

        var result = wooApi.asyncT("{:url('api/wx/getGroups')}",'',function(msg){
            var jsonMsg = JSON.parse(msg);
            $('#wxGroups').text(jsonMsg.groups[0].count)
        });




        // 图表相关
        var domI = document.getElementById("income");
        var income = echarts.init(domI,"hot");
        optionI = {
            title : {
                text: '平台收入',
                subtext: '每月平台收入'
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                data:['平台收入']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {show: true, type: ['line', 'bar']},
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    data : monthI,
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'收入金额:元',
                    type:'bar',
                    data:dataI,
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name: '平均值'}
                        ]
                    }
                },
                
            ]
        };
                    
        // 使用刚指定的配置项和数据显示图表。
        income.setOption(optionI);



        // 图表相关
        var domO = document.getElementById("output");
        var output = echarts.init(domO);
        optionO = {
            title : {
                text: '平台支出',
                subtext: '月平台支出入'
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                data:['平台收入']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {show: true, type: ['line', 'bar']},
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    data : monthO,
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'支出金额:元',
                    type:'bar',
                    data:dataO,
                    markPoint : {
                        data : [
                            {type : 'max', name: '最大值'},
                            {type : 'min', name: '最小值'}
                        ]
                    },
                    markLine : {
                        data : [
                            {type : 'average', name: '平均值'}
                        ]
                    }
                },
                
            ]
        };
                    
        // 使用刚指定的配置项和数据显示图表。
        output.setOption(optionO);











        var domLC = document.getElementById("canvasLocation");
        var canvasLocation = echarts.init(domLC,"hot");
        // 指定图表的配置项和数据
        optionLCT = {
            title : {
                text: '学生训练点分布',
                subtext: gradeCourtData.legend.length+'个训练点',
                x:'center'
            },
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: gradeCourtData.legend
            },
            series : [
                {
                    name: '学生分布',
                    type: 'pie',
                    radius : '65%',
                    center: ['50%', '50%'],
                    data:gradeCourtData.series,
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        canvasLocation.setOption(optionLCT);

        /////////////////////////////////////////////////////////////////////////////////////// 学员分布

        var domLS = document.getElementById("canvasLesson");
        var canvasLesson = echarts.init(domLS,"hot");
        console.log(lessonBuyData)
        // 指定图表的配置项和数据
        optionLS = {
            title : {
                text: '课程购买饼图',
                subtext: lessonBuyData.legend.length+'个课程',
                x:'center'
            },
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: lessonBuyData.legend
            },
            series : [
                {
                    name: '课程购买饼图',
                    type: 'pie',
                    radius: ['35%', '85%'],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            show: true,
                            textStyle: {
                                fontSize: '30',
                                fontWeight: 'bold'
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    data:lessonBuyData.series,
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };


        // 使用刚指定的配置项和数据显示图表。
        canvasLesson.setOption(optionLS);













    })
</script>
{/block}