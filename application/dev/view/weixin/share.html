<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>share page</title>
</head>
<body>
<h1 id="checkJsApi">share</h1>

<script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script>
wx.config({
    debug: true,
    appId: "{$jsapi['appId']}",
    timestamp: {$jsapi['timestamp']},
    nonceStr: "{$jsapi['nonceStr']}",
    signature: "{$jsapi['signature']}",
    jsApiList: [
        // 所有要调用的 API 都要加到这个列表中
        'checkJsApi',
        'onMenuShareTimeline',
        'onMenuShareAppMessage',
        'onMenuShareQQ'
    ]
});
wx.ready(function () {
    // 在这里调用 API
    /*document.querySelector('#checkJsApi').onclick = function () {
        wx.checkJsApi({
            jsApiList: [
                'onMenuShareTimeline',
                'onMenuShareAppMessage',
                'onMenuShareQQ'
            ],
            success: function (res) {
                alert(JSON.stringify(res));
            }
        });
    };*/

    // 分享到朋友圈
    wx.onMenuShareTimeline({
        title: '分享到朋友圈', // 分享标题
        link: "{$url}", // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: 'http://mpdev.hilwl.com/static/default/avatar5.png', // 分享图标
        success: function () {
            // 用户确认分享后执行的回调函数
            alert('已分享');
        },
        cancel: function () {
            // 用户取消分享后执行的回调函数
        }
    });

    // 分享给朋友
    wx.onMenuShareAppMessage({
        title: '', // 分享标题
        desc: '', // 分享描述
        link: '', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: '', // 分享图标
        type: '', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function () {
            // 用户确认分享后执行的回调函数
        },
        cancel: function () {
            // 用户取消分享后执行的回调函数
        }
    });

    // 分享到QQ
    wx.onMenuShareQQ({
        title: '', // 分享标题
        desc: '', // 分享描述
        link: '', // 分享链接
        imgUrl: '', // 分享图标
        success: function () {
            // 用户确认分享后执行的回调函数
        },
        cancel: function () {
            // 用户取消分享后执行的回调函数
        }
    });
});
</script>
</body>
</html>