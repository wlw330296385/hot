{extend name="layout/common" /} {block name="page-content"}
<style>
    .form-horizontal .control-label {
        padding-top: 0;
    }
</style>
<div class="row">
    <div class="col-sm-12 col-md-12">
        <div class="box box-info">

            <form class="form-horizontal lesson-form" method="post" action="">
                <input type="hidden" id="lesson-id" name="id" value="{$lessonInfo.id}">
                <div class="box-body">
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程名称</div>
                        <div class="col-sm-5">
                            {$lessonInfo.lesson}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程类型</div>
                        <div class="col-sm-5">
                            {$lessonInfo.gradecate}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程单价</div>
                        <div class="col-sm-5">
                            {$lessonInfo.cost}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程数量</div>
                        <div class="col-sm-5">
                            {volist name="$lessonInfo.doms" id="vol"}{$vol},{/volist}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">训练周期</div>
                        <div class="col-sm-5">
                            {$lessonInfo.week}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">具体上课时间</div>
                        <div class="col-sm-5">
                            {$lessonInfo.lesson_time}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">所属地区</div>
                        <div class="col-sm-5">
                            {$lessonInfo.province} {$lessonInfo.city} {$lessonInfo.area}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">训练地点</div>
                        <div class="col-sm-5">
                            {$lessonInfo.court}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">具体地址</div>
                        <div class="col-sm-5">
                            {$lessonInfo.location}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">最少开课人数</div>
                        <div class="col-sm-5">
                            {$lessonInfo.min}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">最多开课人数</div>
                        <div class="col-sm-5">
                            {$lessonInfo.max}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">主教练</div>
                        <div class="col-sm-5">
                            {$lessonInfo.coach}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">助理教练</div>
                        <div class="col-sm-5">
                            {$lessonInfo.assistants}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">领队</div>
                        <div class="col-sm-5">
                            {$lessonInfo.leader}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">班主任</div>
                        <div class="col-sm-5">
                            {$lessonInfo.teacher}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程封面</div>
                        <div class="col-sm-5">
                            <img src="{$lessonInfo.cover}" alt="">
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">咨询电话</div>
                        <div class="col-sm-5">
                            {$lessonInfo.telephone}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">是否上架</div>
                        <div class="col-sm-5">
                            {$lessonInfo.status}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">是否是私密课程</div>
                        <div class="col-sm-5">
                            {$lessonInfo.isprivate}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>

                    {if $lessonInfo.isprivate==1}
                    <div class="form-group">
                        <div class="col-sm-2 control-label">私密课程名单</div>
                        <div class="col-sm-4">
                            <ul class="list-group">
                                {volist name='assignList' id="vol"}
                                <li class="list-group-item" data-private="{$vol.member}" data-id="{$vol.member_id}">
                                    <span class="order" style="margin-right:10px;">{$key+1}</span>
                                    <span>{$vol.member}</span>
                                </li>
                                {/volist}
                            </ul>
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    {/if}

                    <div class="form-group">
                        <div class="col-sm-2 control-label">所属训练营</div>
                        <div class="col-sm-5">
                            {$lessonInfo.camp}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程类型</div>
                        <div class="col-sm-5">
                            {$lessonInfo.gradecate}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程金额</div>
                        <div class="col-sm-5">
                            {$lessonInfo.cost}元/课
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课次数量</div>
                        <div class="col-sm-5">
                            {$lessonInfo.total}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">购买课程需要积分</div>
                        <div class="col-sm-5">
                            {$lessonInfo.score}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 control-label">课程日期</div>
                        <div class="col-sm-5">
                            {$lessonInfo.start} ~ {empty name="$lessonInfo.end"}长期{else/}{$lessonInfo.end}{/empty} ( {$lessonInfo.week} )
                        </div>
                        <div class="col-sm-5"></div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-2 control-label">备注</div>
                        <div class="col-sm-5">
                            {$lessonInfo.remarks}
                        </div>
                        <div class="col-sm-5"></div>
                    </div>
                </div>
                <div class="box-footer">
                    <div class="form-group">
                        <div class="col-sm-2"></div>
                        <div class="col-sm-10">
                            <button type="button" class="btn btn-success" onclick="check(1);">审核通过</button>
                            <button type="button" class="btn btn-default" onclick="check(2);">审核不通过</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{/block} {block name="js"}
<script>
    "use strict";

    function check(code) {
        var lesson = $('#lesson-id').val();
        switch (code) {
            case 1:
                var msg = '确定审核通过?';
                if (confirm(msg) === true) {
                    sendpost(lesson, code);
                }
                break;
            case 2:
                var msg = '确定审核不通过?';
                if (confirm(msg) === true) {
                    sendpost(lesson, code);
                }
                break;
        }
    }

    function sendpost(lesson, code) {
        var serverurl = "{:url('lesson/audit')}";
        $.post(serverurl, {
            lesson: lesson,
            code: code,
        }, function (res) {
            //console.log(res);
            alert(res.msg);
            if (res.status) {
                location.href = res.goto;
            } else {
                location.reload();
            }
        }, 'json');
    }
</script>
{/block}