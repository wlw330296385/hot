{extend name="layout/common"/} {block name="css"}
<style>
    .img-md {
        float: none;
    }

    label {
        line-height: 34px;
        margin-bottom: 0;
    }
</style>
{/block} {block name="page-content"}
<div class="box no-border">
    <form role="form" action="" method="post" enctype="multipart/form-data">
        {:token()}
        <div class="box-body">
            <input type="hidden" name="camp" value="{$campInfo.camp}">
            <input type="hidden" name="camp_id" value="{$campInfo.id}">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">班级名称</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="请输入课程名称" name="grade">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">选择课程</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <select class="form-control lessonType">
                            {volist name="lessonList" id="vol"}
                            <option data-id="{$vol.id}" data-is_school="{$vol.is_school}" data-gradecate="{$vol.gradecate}"
                                data-gradecate_id="{$vol.gradecate_id}" data-gradecate_setion="{$vol.gradecate_setion}"
                                data-gradecate_setion_id="{$vol.gradecate_setion_id}">{$vol.lesson}</option>
                            {/volist}
                        </select>
                        <input type="hidden" name="lesson" value="">
                        <input type="hidden" name="lesson_id" value="">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">课程类型</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <span class="form-control gradeType"></span>
                    </div>
                    <input type="hidden" name="gradecate" value="">
                    <input type="hidden" name="gradecate_id" value="">
                    <input type="hidden" name="gradecate_setion" value="">
                    <input type="hidden" name="gradecate_setion_id" value="">
                    <input type="hidden" name="is_school" value="">
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">学员名单</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#studentModal">
                            <span class="form-control students"></span>
                            <input type="hidden" name="student_str" value="">
                            <input type="hidden" name="students" value="">
                            <input type="hidden" name="studentData" value="">
                            <div id="hideStList"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">训练周期</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <select class="form-control" name="week">
                            <option value="不限">不限</option>
                            <option value="周日">周日</option>
                            <option value="周一">周一</option>
                            <option value="周二">周二</option>
                            <option value="周三">周三</option>
                            <option value="周四">周四</option>
                            <option value="周五">周五</option>
                            <option value="周六">周六</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">训练时间</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="请输入课程名称" name="lesson_time" id="datetimepicker">
                    </div>
                </div>
            </div>


            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">训练地点</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#courtModal">
                            <input type="text" class="form-control" placeholder="请选择训练地点" name="court">
                            <input type="hidden" name="court_id" class="court_id " value="">
                        </div>
                    </div>
                </div>
            </div>


            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">具体地址</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="请输入具体地址" name="location">
                    </div>
                </div>
            </div>

            <style>
                /* 区域选择器页面样式调整 */
    
                    .city-picker-span {
                        border: 1px solid #ddd;
                        padding-left: 15px;
                    }
                </style>
            <div id="distpicker">
                <div class="form-group" style="position: relative;">
                    <div class="row">
                        <div class="col-md-2 col-sm-2 text-right">
                            <label for="">所属地区</label>
                        </div>
                        <div class="col-md-5 col-sm-5">
                            <input type="text" id="city-picker3" class="form-control" placeholder="请选择所属地区" name="address"
                                data-toggle="city-picker">
                        </div>
                    </div>
                    <input type="hidden" name="province" value="">
                    <input type="hidden" name="city" value="">
                    <input type="hidden" name="area" value="">
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">请选择主教练</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#coachModal">
                            <input type="text" class="form-control" placeholder="请选择主教练" name="coach">
                            <input type="hidden" name="coach_id" class="coach_id " value="">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">主教底薪</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="选填" name="coach_salary">
                    </div>
                </div>

            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">请选择助理教练</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#assistantModal">
                            <input type="text" class="form-control" placeholder="请选择助理教练" name="assistants" value="">
                            <input type="hidden" name="assistant_ids" class="assistant_ids" value="">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">助教底薪</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="选填" name="assistant_salary">
                    </div>
                </div>

            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">提成基数</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="选填" name="salary_base">
                    </div>
                </div>

            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">请选择领队</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#leaderModal">
                            <input type="text" class="form-control" placeholder="请选择领队" name="leader">
                            <input type="hidden" name="leader_id" class="leader_id" value="">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">请选择班主任</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#teacherModal">
                            <input type="text" class="form-control" placeholder="请选择班主任" name="teacher">
                            <input type="hidden" name="teacher_id" class="teacher_id" value="">
                        </div>
                    </div>
                </div>
            </div>


            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">教案</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div data-toggle="modal" data-target="#teacherModal">
                            <input type="text" class="form-control" placeholder="请选择班主任" name="teacher">
                            <input type="hidden" name="teacher_id" class="teacher_id" value="">
                            //planList
                        </div>
                    </div>
                </div>
            </div>


            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">生效状态</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <select class="form-control" name="status">
                            <option value="1">当前（立即生效）</option>
                            <option value="-1">预排</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">备注</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <input type="text" class="form-control" placeholder="请输入备注信息" name="remarks">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                        <label for="">合照封面</label>
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <div class="box-header">
                            <div class="col-sm-12 col-md-12">
                                <a class="btn-banner" href="#" title="点击替换图片">
                                    <img class="img-thumbnail" id="uploader-preview1" src="">
                                    <div class="row">
                                        <div id="filePicker1">选择上传</div>
                                    </div>
                                    <input id="uploader-input1" type="hidden" name="logo" value="">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="box-footer">
                <div class="row">
                    <div class="col-md-2 col-sm-2 text-right">
                    </div>
                    <div class="col-md-5 col-sm-5">
                        <button type="submit" class="btn btn-success">提 交</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>


<!-- 学员名单 -->
<div class="modal fade" id="studentModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">请选择学员</h4>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm">
                    <input type="text" class="form-control studentName" placeholder="请输入学员姓名..." value="">
                    <span class="input-group-btn">
                        <button type="button" id="searchStudentBtn" class="btn btn-default btn-flat"><i class="fa fa-search"></i>
                            搜索</button>
                    </span>
                </div>
                <div class="tableScroll">
                    <table id="studentList" class="table table-bordered table-striped dataTable">
                        <thead>
                            <tr role="row">
                                <th>学员名称</th>
                                <th>详情</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="3" class="text-center">请先选择课程!</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" id="clearStudent">清除所选学员</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="studentConfirm">确定</button>
            </div>
        </div>
    </div>
</div>

<!-- 训练地点 -->
<div class="modal fade" id="courtModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">请选择训练场地</h4>
            </div>
            <div class="modal-body">
                <div class="tableScroll">
                    <table id="courtList" class="table table-bordered table-striped dataTable">
                        <thead>
                            <tr role="row">
                                <th>场地名称</th>
                                <th>所属地区</th>
                                <th>详情</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 场地列表 -->
                            {volist name="courtList" id="vol"}
                            <tr role="row" class="odd">
                                <td>{$vol.court}</td>
                                <td>{$vol.city}</td>
                                <td>
                                    <a href="">查看详情</a>
                                </td>
                                <td>
                                    <span class="btn btn-xs btn-info" data-court="{$vol.court}" data-court_id="{$vol.id}">确定</span>
                                </td>
                            </tr>
                            {/volist}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" id="clearCourt">清除所选场地</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 教练列表  -->
<div class="modal fade" id="coachModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">请选择教练</h4>
            </div>
            <div class="modal-body">
                <div class="tableScroll">
                    <table id="coachList" class="table table-bordered table-striped dataTable">
                        <thead>
                            <tr role="row">
                                <th>教练员名称</th>
                                <th>详情</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 教练列表 -->
                            {volist name="coachList" id="vol"}
                            <tr role="row" class="odd">
                                <td>{$vol.coach}</td>
                                <td>
                                    <a href="">查看详情</a>
                                </td>
                                <td>
                                    <span class="btn btn-xs btn-info" data-coach="{$vol.coach}" data-coach_id="{$vol.id}">确定</span>
                                </td>
                            </tr>
                            {/volist}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" id="clearCoach">清除所选教练</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 助教练 -->
<div class="modal fade" id="assistantModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">请选择助理教练</h4>
            </div>
            <div class="modal-body">
                <div class="tableScroll">
                    <table id="assistantList" class="table table-bordered table-striped dataTable">
                        <thead>
                            <tr role="row">
                                <th>教练员名称</th>
                                <th>详情</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 教练列表 -->

                            {volist name="coachList" id="vol"}
                            <tr role="row" class="odd">
                                <td>{$vol.coach}</td>
                                <td>
                                    <a href="">查看详情</a>
                                </td>
                                <td>
                                    <input type="checkbox" value="{$vol.coach}" class="checkbox-assistant" data-id="{$vol.id}">
                                </td>
                            </tr>
                            {/volist}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" id="clearAssistant">清除所选教练</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="assistantConfirm">确定</button>
            </div>
        </div>
    </div>
</div>

<!-- 领队 -->
<div class="modal fade" id="leaderModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">请选择领队</h4>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#fansTab" data-toggle="tab"> 粉丝列表</a>
                    </li>
                    <li>
                        <a href="#coachTab" data-toggle="tab">教练列表</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="fansTab">
                        <div class="tableScroll">
                            <table class="table table-bordered table-striped dataTable leaderList">
                                <thead>
                                    <tr role="row">
                                        <th>粉丝名称</th>
                                        <th>详情</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 粉丝列表 -->

                                    {volist name="fansList" id="vol"}
                                    <tr role="row" class="odd">
                                        <td>{$vol.member}</td>
                                        <td>
                                            <a href="">查看详情</a>
                                        </td>
                                        <td>
                                            <span class="btn btn-xs btn-info" data-leader="{$vol.member}"
                                                data-leader_id="{$vol.id}">确定</span>
                                        </td>
                                    </tr>
                                    {/volist}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="coachTab">
                        <div class="tableScroll">
                            <table class="table table-bordered table-striped dataTable leaderList">
                                <thead>
                                    <tr role="row">
                                        <th>教练员名称</th>
                                        <th>详情</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody class="active">
                                    <!-- 教练列表 -->
                                    {volist name="coachList" id="vol"}
                                    <tr role="row" class="odd">
                                        <td>{$vol.coach}</td>
                                        <td>
                                            <a href="">查看详情</a>
                                        </td>
                                        <td>
                                            <span class="btn btn-xs btn-info" data-leader="{$vol.coach}" data-leader_id="{$vol.id}">确定</span>
                                        </td>
                                    </tr>
                                    {/volist}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left clearLeader">清除所选领队</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 班主任 -->
<div class="modal fade" id="teacherModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">请选择领队</h4>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#fansTab1" data-toggle="tab"> 粉丝列表</a>
                    </li>
                    <li>
                        <a href="#coachTab1" data-toggle="tab">教练列表</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="fansTab1">
                        <div class="tableScroll">
                            <table class="table table-bordered table-striped dataTable teacherList">
                                <thead>
                                    <tr role="row">
                                        <th>粉丝名称</th>
                                        <th>所属地区</th>
                                        <th>详情</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 粉丝列表 -->
                                    {volist name="fansList" id="vol"}
                                    <tr role="row" class="odd">
                                        <td>{$vol.member}</td>
                                        <td>
                                            <a href="">查看详情</a>
                                        </td>
                                        <td>
                                            <span class="btn btn-xs btn-info" data-teacher="{$vol.member}"
                                                data-teacher_id="{$vol.id}">确定</span>
                                        </td>
                                    </tr>
                                    {/volist}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="coachTab1">
                        <div class="tableScroll">
                            <table class="table table-bordered table-striped dataTable teacherList">
                                <thead>
                                    <tr role="row">
                                        <th>教练员名称</th>
                                        <th>所属地区</th>
                                        <th>详情</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody class="active">
                                    <!-- 教练列表 -->
                                    {volist name="coachList" id="vol"}
                                    <tr role="row" class="odd">
                                        <td>{$vol.coach}</td>
                                        <td>
                                            <a href="">查看详情</a>
                                        </td>
                                        <td>
                                            <span class="btn btn-xs btn-info" data-teacher="{$vol.coach}"
                                                data-teacher_id="{$vol.id}">确定</span>
                                        </td>
                                    </tr>
                                    {/volist}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left clearTeacher">清除所选班主任</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
</div>


{/block} {block name='js'}

<script src="/static/backend/plugins/webuploader/webuploader.min.js"></script>
<script>
    var serverUrl = "{:url('Upload/uploadImg',['dir'=>'article'])}";
</script>
<script src="/static/backend/adminlte/js/upload/banner.js"></script>
<!-- <script type="text/javascript" charset="utf-8" src="/static/UEditor/ueditor.config.js"></script> -->
<!-- <script type="text/javascript" charset="utf-8" src="/static/UEditor/ueditor.all.js"></script> -->
<script type="text/javascript" src="/static/backend/adminlte/js/bootstrap-datetimepicker.min.js" charset="UTF-8"></script>
<script type="text/javascript" src="/static/backend/adminlte/js/city-picker.data.js" charset="UTF-8"></script>
<script type="text/javascript" src="/static/backend/adminlte/js/city-picker.js" charset="UTF-8"></script>
<link rel="stylesheet" href="/static/backend/adminlte/css/bootstrap-datetimepicker.min.css">
<link rel="stylesheet" href="/static/backend/adminlte/css/city-picker.css">
<script type="text/javascript">
    var lesson_id = ''
    $(function () {

        // boostrap时间选择器
        $('#datetimepicker').datetimepicker({
            format: 'hh:ii',
            startView: 1,
            autoclose: true,
        });

        // 获取省市区
        $(document).on("click", ".province a", function () {
            $("input[name=province]").val($(this).text());
        })
        $(document).on("click", ".city a", function () {
            $("input[name=city]").val($(this).text());
        })
        $(document).on("click", ".district a", function () {
            $("input[name=area]").val($(this).text());
        })

        //所属课程api
        $(".lessonType").on("change", function () {
            //获取课程的大小类型及ID
            var gradecate_setion = $(this).children("option:checked").attr('data-gradecate_setion');
            var gradecate_setion_id = $(this).children("option:checked").attr(
                'data-gradecate_setion_id');
            var gradecate = $(this).children("option:checked").attr('data-gradecate');
            var gradecate_id = $(this).children("option:checked").attr('data-gradecate_id');
            var is_school = $(this).children("option:checked").attr('data-is_school');
            var lesson = $(this).children("option:checked").text();
            lesson_id = $(this).children("option:checked").attr("data-id");
            console.log(is_school)
            $("input[name='gradecate_setion']").val(gradecate_setion);
            $("input[name='gradecate_setion_id']").val(gradecate_setion_id);
            $("input[name='gradecate']").val(gradecate);
            $("input[name='gradecate_id']").val(gradecate_id);
            $("input[name='is_school']").val(is_school);
            $("input[name=lesson]").val(lesson);
            $("input[name=lesson_id]").val(lesson_id);
            $(".gradeType").text(gradecate_setion + gradecate);
            //获取课程名称及ID并获取对应的学生
            toStudentList(lesson_id, '');

        });

        // 学员名单
        $("#studentConfirm").on('click', '', function () {
            var inputList = "";
            var studentNames = "";
            studentList = [];
            $("#studentList input[name='checkbox-student']:checked").each(function (i) {
                var student_id = $(this).attr("data-student_id");
                var student = $(this).val();
                var student_typenum = $(this).attr("data-type_num");
                var camp = $(this).attr("data-camp");
                var camp_id = $(this).attr("data-camp_id");
                var lesson = $(this).attr("data-lesson");
                var lesson_id = $(this).attr("data-lesson_id");
                var member = $(this).attr("data-member");
                var member_id = $(this).attr("data-member_id");
                studentList[i] = {
                    student: student,
                    student_id: student_id,
                    camp: camp,
                    camp_id: camp_id,
                    lesson: lesson,
                    lesson_id: lesson_id,
                    member: member,
                    member_id: member_id,
                    type: student_typenum
                };
                inputList += '<input type="hidden" class="stdList" data-student="' + student +
                    '" data-student_id="' + student_id + '" data-camp="' + camp +
                    '" data-camp_id="' + camp_id + '" data-lesson="' + lesson +
                    '" data-lesson_id="' + lesson_id + '" data-member="' + member +
                    '" data-member_id="' + member_id + '" data-student_typenum="' +
                    student_typenum + '">';
                studentNames += student + ','
            });
            $("#hideStList").empty();
            $("#hideStList").html(inputList);
            $(".students").text(studentNames.substring(0, studentNames.length - 1))
            $("input[name=student_str]").val(studentNames.substring(0, studentNames.length - 1))
            $("input[name=studentData]").val(JSON.stringify(studentList));
            console.log(inputList)
            console.log(studentList)
            console.log(studentNames)

            //班级成员
            $("input[name=students]").val(studentList.length)
            $('#student').modal('hide');
        });
        $("#clearStudent").on("click", function () {
            $("input[name=student_str]").val('');
            $("input[name=students]").val('');
            $("input[name=studentData]").val('');
            $('#coachModal').modal('hide');
        });

        //搜索训练营
        $("#searchStudentBtn").on("click", '', function () {
            var keyword = $(".studentName").val();
            if (keyword == "") {
                alert("请输入学员姓名！");
            } else {
                toStudentList(lesson_id, keyword);
            }
        })

        //训练场地 
        $("#courtList tbody").on("click", ".btn", function () {
            var court_id = $(this).attr("data-court_id");
            var court = $(this).attr("data-court");
            $("input[name=court_id]").val(court_id);
            $("input[name=court]").val(court);
            $('#courtModal').modal('hide');
        });
        $("#clearCourt").on("click", function () {
            $("input[name=court_id]").val('');
            $("input[name=court]").val('');
            $('#courtModal').modal('hide');
        });

        //主教练 
        $("#coachList tbody").on("click", ".btn", function () {
            var coach_id = $(this).attr("data-coach_id");
            var coach = $(this).attr("data-coach");
            var asID = '';
            var isStop = 'No'
            /// 判断所选主教是否存在助教栏
            $("#assistantList .checkbox-assistant:checked").each(function () {
                asID = $(this).attr('data-id');
                if (asID == coach_id) {
                    alert(coach + "已是助教，请不要重复选择！");
                    $(this).find(".checkbox-assistant").prop("checked", false);
                    isStop = 'Yes';
                    return false;
                }
            });
            if (isStop == 'No') {
                $("input[name=coach_id]").val(coach_id);
                $("input[name=coach]").val(coach);
                $('#coachModal').modal('hide');
            }
        });
        $("#clearCoach").on("click", function () {
            $("input[name=coach_id]").val('');
            $("input[name=coach]").val('');
            $('#coachModal').modal('hide');
        });

        //助理教练
        $("#assistantConfirm").click(function () {
            $("input[name='assistants']").val($(".checkbox-assistant:checked").map(
                function () {
                    return $(this).val()
                }).get().join(","));
            $("input[name='assistant_ids']").val($(".checkbox-assistant:checked").map(
                function () {
                    return $(this).attr('data-id');
                }).get().join(","));
            $('#assistantModal').modal('hide');
        });
        // 判断所选助教是否存在主教栏
        $("#assistantList .checkbox-assistant").on('click', function () {
            var mainID = $(".coach_id").val();
            var asID = $(this).attr('data-id');
            var asName = $(this).val();
            if (asID == mainID) {
                alert(asName + "已是主教练，请不要重复选择！");
                $(this).prop("checked", false);
                return false;
            }
        });
        $("#clearAssistant").on("click", function () {
            $("input[name=assistant_ids]").val('');
            $("input[name=assistants]").val('');
            $('#assistantModal').modal('hide');
        });

        //领队
        $(".leaderList tbody").on("click", ".btn", function () {
            var leader_id = $(this).attr("data-leader_id");
            var leader = $(this).attr("data-leader");
            $("input[name=leader_id]").val(leader_id);
            $("input[name=leader]").val(leader);
            $('#leaderModal').modal('hide');
        });
        $(".clearLeader").on("click", function () {
            $("input[name=leader_id]").val('');
            $("input[name=leader]").val('');
            $('#leaderModal').modal('hide');
        });

        //班主任
        $(".teacherList tbody").on("click", ".btn", function () {
            var teacher_id = $(this).attr("data-teacher_id");
            var teacher = $(this).attr("data-teacher");
            $("input[name=teacher_id]").val(teacher_id);
            $("input[name=teacher]").val(teacher);
            $('#teacherModal').modal('hide');
        });
        $(".clearTeacher").on("click", function () {
            $("input[name=teacher_id]").val('');
            $("input[name=teacher]").val('');
            $('#teacherModal').modal('hide');
        });

    })

    function toStudentList(lesson_id, keyword) {
        var url = "{:url('api/lesson_member/searchLessonMemberNoPageApi','','',true)}";
        var campID = "{$campInfo.id}";
        $.ajax({
            url: url,
            data: {
                lesson_id: lesson_id,
                keyword: keyword,
                camp_id: campID,
                status: 1
            },
            dataType: 'json', //服务器返回json格式数据
            type: 'post', //HTTP请求类型
            timeout: 10000, //超时时间设置为10秒；
            success: function (data) {
                console.log(data)
                if (data.code == 200) {
                    var newli = '';
                    var tys = '';
                    for (var i = 0; i <= data.data.length - 1; i++) {
                        // tys = '';
                        // if (data.data[i].type == "体验生") {
                        //     tys = '<span class="tips">体验生</span>'
                        // }
                        // newli = newli + '<div class="mui-input-row mui-checkbox mui-left"><label>' + data.data[
                        //         i].student + tys +
                        //     '</label><input name="checkbox-student" class="student" value="' + data.data[i]
                        //     .student + '" type="checkbox" data-id="' + data.data[i].id +
                        //     '"  data-student_id="' + data.data[i].student_id + '" data-student="' + data.data[
                        //         i].student + '" data-camp="' + data.data[i].camp + '" data-camp_id="' +
                        //     data.data[i].camp_id + '" data-lesson="' + data.data[i].lesson +
                        //     '" data-lesson_id="' + data.data[i].lesson_id + '" data-member="' + data.data[i]
                        //     .member + '" data-member_id="' + data.data[i].member_id +
                        //     '" data-student_typenum="' + data.data[i].type_num + '" ></div>'
                        newli +=
                            ` <tr role="row" class="odd">
                                <td>${data.data[i].student}</td>
                                <td>
                                    <a href="">查看详情</a>
                                </td>
                                <td>
                                    <input name="checkbox-student" class="student" value="${data.data[i].student}" type="checkbox" 
                                    data-id="${data.data[i].id}" data-student_id="${data.data[i].student_id}" data-student="${data.data[i].student}" 
                                    data-camp="${data.data[i].camp}" data-camp_id="${data.data[i].camp_id}" data-lesson="${data.data[i].lesson}" data-lesson_id="${data.data[i].lesson_id}"
                                     data-member="${data.data[i].member}" data-member_id="${data.data[i].member_id}" data-student_typenum="${data.data[i].type_num}">
                                </td>
                            </tr>`
                    }

                    $("#studentList tbody").empty();
                    if (newli == '') {
                        newli = '<tr><td colspan="3" class="text-center">没有查找到数据!</td></tr>'
                    }
                    $("#studentList tbody").append(newli);
                }
            },
            error: function (xhr, type, errerThrown) {}
        });
    };
</script> {/block}